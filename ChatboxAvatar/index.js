(function(i,l,e,h,y){"use strict";const r=e.findByProps("useStateFromStores"),U=e.findByProps("Actions","ExpressionButton"),g=e.findByProps("getStatusSize").default,{Pressable:p}=h.ReactNative,{DEFAULT_STATUS_CUTOUT:B}=e.findByProps("DEFAULT_STATUS_CUTOUT"),s=e.findByStoreName("SelfPresenceStore"),c=e.findByStoreName("UserStore"),u=e.findByStoreName("SelectedChannelStore"),S=e.findByStoreName("ChannelStore"),P=e.findByName("showUserProfileActionSheet"),a=e.findByProps("openLazy","hideActionSheet"),T=e.findByName("StatusPickerActionSheet"),C=e.findByProps("saveAccountChanges"),{UserSettingsSections:A}=e.findByProps("UserSettingsSections");function m(){const t=r.useStateFromStores([c],function(){return c.getCurrentUser()}),n=r.useStateFromStores([s],function(){return s.getStatus()}),o=r.useStateFromStores([u],function(){return u.getCurrentlySelectedChannelId()}),f=r.useStateFromStores([S],function(){return S.getChannel(o)},[o]);return React.createElement(p,{style:{height:40,width:40,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center"},onLongPress:F,onPress:v(t?.id,f?.id??o)},React.createElement(g,{user:t,guildId:f?.guild_id,status:n,avatarDecoration:t.avatarDecoration,animate:!0,autoStatusCutout:B}))}function v(t,n){return function(){P({userId:t,channelId:n})}}function F(){a.hideActionSheet(),a.openLazy(async function(){return T},"StatusPicker",{onSetCustomStatus:function(){a.hideActionSheet(),C.open(A.CUSTOM_STATUS,null,{openWithoutBackstack:!0})}})}const d=[],L=function(){d.push(l.after("render",U.default,function(t,n){y.findInReactTree(n,function(o){return o?.children?.[0]?.props?.actions}).children.splice(0,0,React.createElement(m,null))}))},N=function(){for(const t of d)t?.()};return i.onLoad=L,i.onUnload=N,i})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.utils);
