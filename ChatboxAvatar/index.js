(function(c,p,n,h,s){"use strict";const u=n.findByProps("useStateFromStores"),l=n.findByName("ChatInput"),y=n.findByProps("AvatarSizes").default,{Pressable:v}=h.ReactNative,f=n.findByStoreName("SelfPresenceStore"),d=n.findByStoreName("UserStore"),B=n.findByStoreName("AuthenticationStore"),P=n.findByName("showUserProfileActionSheet"),i=n.findByProps("openLazy","hideActionSheet"),A=n.findByName("StatusPickerActionSheet"),m=n.findByProps("saveAccountChanges"),{UserSettingsSections:I}=n.findByProps("UserSettingsSections");function U(t){let{channelId:o}=t;const r=u.useStateFromStores([d],function(){return d.getCurrentUser()}),a=u.useStateFromStores([f],function(){return f.getStatus()});return React.createElement(v,{onLongPress:_,onPress:g(o)},React.createElement(y,{user:r,status:a,avatarDecoration:r.avatarDecoration}))}function g(t){return function(){P({userId:B.getId(),channelId:t})}}function _(){i.hideActionSheet(),i.openLazy(async function(){return A},"StatusPicker",{onSetCustomStatus:function(){i.hideActionSheet(),m.open(I.CUSTOM_STATUS,null,{openWithoutBackstack:!0})}})}const S=[],C=function(){S.push(p.after("render",l.prototype,function(t,o){const r=s.findInReactTree(o,function(e){return"channel"in e.props&&e.props.channel}).props.channel,a=s.findInReactTree(o,function(e){return"forceAnimateButtons"in e.props&&e.props.actions}).props.actions;if(a.find(function(e){return"__vd_chatboxAvatar"in e}))return;const R={__vd_chatboxAvatar:!0,IconComponent:function(){return React.createElement(U,{channelId:r.id})},active:!1,disabled:!1};a.splice(0,0,R)}))},N=function(){for(const t of S)t?.()};return c.onLoad=C,c.onUnload=N,c})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.utils);
