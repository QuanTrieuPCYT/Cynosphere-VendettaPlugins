(function(a,g,e,B,P){"use strict";const r=e.findByProps("useStateFromStores"),T=e.findByProps("Actions","ExpressionButton"),A=e.findByProps("getStatusSize").default,{Pressable:C}=B.ReactNative,l=e.findByProps("DEFAULT_STATUS_CUTOUT");let S;l!=null&&(S=l.DEFAULT_STATUS_CUTOUT);const f=e.findByStoreName("SelfPresenceStore"),h=e.findByStoreName("UserStore"),y=e.findByStoreName("SelectedChannelStore"),U=e.findByStoreName("ChannelStore"),m=e.findByName("showUserProfileActionSheet"),s=e.findByProps("openLazy","hideActionSheet"),F=e.findByName("StatusPickerActionSheet"),L=e.findByProps("saveAccountChanges"),{UserSettingsSections:E}=e.findByProps("UserSettingsSections");function I(){const t=r.useStateFromStores([h],function(){return h.getCurrentUser()}),o=r.useStateFromStores([f],function(){return f.getStatus()}),n=r.useStateFromStores([y],function(){return y.getCurrentlySelectedChannelId()}),i=r.useStateFromStores([U],function(){return U.getChannel(n)},[n]);return React.createElement(C,{style:{height:40,width:40,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center"},onLongPress:k,onPress:N(t?.id,i?.id??n)},React.createElement(A,{user:t,guildId:i?.guild_id,status:o,avatarDecoration:t.avatarDecoration,animate:!0,autoStatusCutout:S}))}function N(t,o){return function(){m({userId:t,channelId:o})}}function k(){s.hideActionSheet(),s.openLazy(async function(){return F},"StatusPicker",{onSetCustomStatus:function(){s.hideActionSheet(),L.open(E.CUSTOM_STATUS,null,{openWithoutBackstack:!0})}})}const v=[],D=function(){v.push(g.after("render",T.default,function(t,o){var n;const i=(n=P.findInReactTree(o,function(p){var u,c,d;return p==null||(d=p.children)===null||d===void 0||(c=d[0])===null||c===void 0||(u=c.props)===null||u===void 0?void 0:u.actions}))===null||n===void 0?void 0:n.children;i&&i.splice(0,0,React.createElement(I,null))}))},_=function(){for(const t of v)t?.()};return a.onLoad=D,a.onUnload=_,a})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.utils);
