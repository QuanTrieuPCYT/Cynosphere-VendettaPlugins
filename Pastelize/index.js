(function(i,v,s,o,r,C,R,g){"use strict";const k=s.findByName("MurmurHashV3");function d(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.75,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.6;const n=k(e)%360,l=r.chroma.hsl(n,a,t);return r.ReactNative.processColor(l.toString())}const{ScrollView:S}=R.General,{TableRowGroup:z,TableSwitchRow:f,TableRowIcon:h}=s.findByProps("TableRowGroup");function N(){C.useProxy(o.storage);const e=r.React.createElement(h,{source:g.getAssetIDByName("ic_tag"),variant:"blurple"}),a=r.React.createElement(h,{source:g.getAssetIDByName("ic_webhook_24px"),variant:"blurple"}),t=r.React.createElement(h,{source:g.getAssetIDByName("ic_messages"),variant:"blurple"});return r.React.createElement(S,{style:{flex:1}},r.React.createElement(z,null,r.React.createElement(f,{label:"Pastelize all",subLabel:"Ignores checking for no role",icon:e,value:o.storage.pastelizeAll??!1,onValueChange:function(n){return o.storage.pastelizeAll=n}}),r.React.createElement(f,{label:"Pastelize webhooks by display name",subLabel:"Otherwise uses the webhook ID",icon:a,value:o.storage.webhookName??!0,onValueChange:function(n){return o.storage.webhookName=n}}),r.React.createElement(f,{label:"Pastelize message content",subLabel:"Use RoleColorEverywhere for coloring if not using Pastelize All. Same caveats with tapping message content apply.",icon:t,value:o.storage.pastelizeContent??!1,onValueChange:function(n){return o.storage.pastelizeContent=n}})))}const M=s.findByName("RowManager"),A=s.findByStoreName("MessageStore"),b=s.findByStoreName("GuildMemberStore"),y=s.findByProps("int2hex");let p;function w(e,a){for(const t of e)if(t.type=="mention"&&t.userId!=null&&t.colorString==null){const n=b.getMember(a,t.userId);if(a!=null&&n==null)return;const l=y.int2hex(d(t.userId,.85,.75)),u=y.hex2int(l);t.roleColor=u,t.color=u,t.colorString=l}else Array.isArray(t.content)&&w(t.content,a)}function I(e,a){const t=A.getMessage(e.channelId,e.id),n=b.getMember(e.guildId,e.authorId);if(e.content&&w(e.content,e.guildId),e.guildId&&n==null)return;const l=o.storage.pastelizeAll??!1,u=o.storage.webhookName??!0,P=o.storage.pastelizeContent??!1;let c;if(t?.webhookId?u?c=e.username:c=t.webhookId:(!(a?.colorString??e.roleColor)&&!l||l)&&(c=e.authorId),c){const m=d(c);if(e.roleColor=m,e.usernameColor=m,e.colorString=m,P&&e.content){const L=d(c,.85,.75);e.content=[{content:e.content,type:"link",target:"usernameOnClick",context:{username:1,usernameOnClick:{action:"0",userId:"0",linkColor:L,messageChannelId:"0"},medium:!0}}]}}}const B=function(){p=v.after("generate",M.prototype,function(e,a){let[t]=e,{message:n}=a;t.rowType===1&&(I(n,t.message),n.referencedMessage?.message&&I(n.referencedMessage.message,null))})},E=function(){p?.()};return i.onLoad=B,i.onUnload=E,i.settings=N,i})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.metro.common,vendetta.storage,vendetta.ui.components,vendetta.ui.assets);
