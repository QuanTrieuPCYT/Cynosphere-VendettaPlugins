(function(t,f,i,o,w,y,m,b){"use strict";const{ScrollView:v}=y.General,{TableRowGroup:R,TableSwitchRow:$,TableRowIcon:h}=i.findByProps("TableRowGroup");function U(){w.useProxy(o.storage);const c=m.React.createElement(h,{source:b.getAssetIDByName("ic_person_status"),variant:"blurple"});return m.React.createElement(v,{style:{flex:1}},m.React.createElement(R,null,m.React.createElement($,{label:"Only show usernames",icon:c,value:o.storage.onlyUsername??!1,onValueChange:function(l){return o.storage.onlyUsername=l}})))}const k=i.findByName("RowManager"),d=i.findByStoreName("UserStore");let g;const p=function(){g=f.after("generate",k.prototype,function(c,l){let[r]=c,{message:a}=l;if(r.rowType!==1||a.username==null)return;const e=r.message.author;if(e&&!(e.bot&&e.discriminator=="0000")){if(o.storage.onlyUsername){if(a.username="\u200B"+e.username,a.referencedMessage?.message?.username){const s=a.referencedMessage.message,n=d.getUser(s.authorId);if(!n||n.bot&&n.discriminator=="0000")return;const u=s.username.startsWith("@");s.username="\u200B"+n.username,u&&(s.username="@"+s.username)}return}if(e.discriminator=="0"?r.message.nick&&r.message.nick.toLowerCase()!=e.username?a.username=`${r.message.nick} (@${e.username})`:a.username.toLowerCase()!=e.username&&(a.username+=" (@"+e.username+")"):r.message.nick&&r.message.nick!=e.username?a.username=`${r.message.nick} (${e.username}#${e.discriminator})`:a.username!=e.username?a.username+=` (${e.username}#${e.discriminator})`:a.username+="#"+e.discriminator,a.referencedMessage?.message?.username){const s=a.referencedMessage.message,n=d.getUser(s.authorId),u=s.username.replace("@","");if(!n||n.bot&&n.discriminator=="0000")return;n.discriminator=="0"?u.toLowerCase()!=n.username&&(s.username+=" (@"+n.username+")"):u!=n.username?s.username+=" ("+n.tag+")":s.username+="#"+n.discriminator}}})},B=function(){g?.()};return t.onLoad=p,t.onUnload=B,t.settings=U,t})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.metro.common,vendetta.ui.assets);
