(function(m,u,i){"use strict";const o=i.findByName("RowManager"),c=i.findByStoreName("UserStore");let t;const d=function(){t=u.after("generate",o.prototype,function(f,$){let[s]=f,{message:n}=$;if(s.rowType!==1)return;const e=s.message.author;if(e&&!(e.bot&&e.discriminator=="0000")&&(e.discriminator=="0"?s.message.nick&&s.message.nick!=e.username?n.username=`${s.message.nick} (@${e.username})`:n.username!=e.username&&(n.username+=" (@"+e.username+")"):s.message.nick&&s.message.nick!=e.username?n.username=`${s.message.nick} (${e.username}#${e.discriminator})`:n.username!=e.username?n.username+=` (${e.username}#${e.discriminator})`:n.username+="#"+e.discriminator,n.referencedMessage?.message?.username)){const a=n.referencedMessage.message,r=c.getUser(a.authorId),k=a.username.replace("@","");if(!r||r.bot&&r.discriminator=="0000")return;r.discriminator=="0"?a.username!=r.username&&(a.username+=" (@"+r.username+")"):k!=r.username?a.username+=" ("+r.tag+")":a.username+="#"+r.discriminator}})},g=function(){t?.()};return m.onLoad=d,m.onUnload=g,m})({},vendetta.patcher,vendetta.metro);
