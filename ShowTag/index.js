(function(t,b,m,o,R,U,u,h){"use strict";const{ScrollView:$}=U.General,{TableRowGroup:k,TableSwitchRow:p,TableRowIcon:B}=m.findByProps("TableRowGroup");function L(){R.useProxy(o.storage);const c=u.React.createElement(B,{source:h.getAssetIDByName("ic_person_status"),variant:"blurple"});return u.React.createElement($,{style:{flex:1}},u.React.createElement(k,null,u.React.createElement(p,{label:"Only show usernames",icon:c,value:o.storage.onlyUsername??!1,onValueChange:function(l){return o.storage.onlyUsername=l}})))}const M=m.findByName("RowManager"),w=m.findByStoreName("UserStore");let y;const T=function(){y=b.after("generate",M.prototype,function(c,l){let[s]=c,{message:a}=l;var d,g;if(s.rowType!==1||a.username==null)return;const e=s.message.author;if(e&&!(e.bot&&e.discriminator=="0000")){if(o.storage.onlyUsername){var f,v;if(a.username="\u200B"+e.username,!((v=a.referencedMessage)===null||v===void 0||(f=v.message)===null||f===void 0)&&f.username){const r=a.referencedMessage.message,n=w.getUser(r.authorId);if(!n||n.bot&&n.discriminator=="0000")return;const i=r.username.startsWith("@");r.username="\u200B"+n.username,i&&(r.username="@"+r.username)}return}if(e.discriminator=="0"?s.message.nick&&s.message.nick.toLowerCase()!=e.username?a.username=`${s.message.nick} (@${e.username})`:a.username.toLowerCase()!=e.username&&(a.username+=" (@"+e.username+")"):s.message.nick&&s.message.nick!=e.username?a.username=`${s.message.nick} (${e.username}#${e.discriminator})`:a.username!=e.username?a.username+=` (${e.username}#${e.discriminator})`:a.username+="#"+e.discriminator,!((g=a.referencedMessage)===null||g===void 0||(d=g.message)===null||d===void 0)&&d.username){const r=a.referencedMessage.message,n=w.getUser(r.authorId),i=r.username.replace("@","");if(!n||n.bot&&n.discriminator=="0000")return;n.discriminator=="0"?i.toLowerCase()!=n.username&&(r.username+=" (@"+n.username+")"):i!=n.username?r.username+=" ("+n.tag+")":r.username+="#"+n.discriminator}}})},C=function(){y?.()};return t.onLoad=T,t.onUnload=C,t.settings=L,t})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.metro.common,vendetta.ui.assets);
